# ğŸš€ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Trevel Ø±ÙˆÛŒ Ø¯Ø§Ù…Ù†Ù‡ hurparvaz.com

## ğŸ“‹ Ù…Ø±Ø§Ø­Ù„ Ú©Ø§Ù…Ù„ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ

### Ù…Ø±Ø­Ù„Ù‡ 1: Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Frontend

1. **ÙØ§ÛŒÙ„ Ø¢Ù…Ø§Ø¯Ù‡**: `hurparvaz-frontend.zip`
2. **Ù…Ø³ÛŒØ± Ø¢Ù¾Ù„ÙˆØ¯**: `/www/wwwroot/hurparvaz.com/`
3. **Ù…Ø±Ø§Ø­Ù„**:
   - Ø¯Ø± Ù¾Ù†Ù„ Ø§ÛŒ Ù¾Ù†Ù„ØŒ Ø±ÙˆÛŒ Ø¯Ø§Ù…Ù†Ù‡ `hurparvaz.com` Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - Ø±ÙˆÛŒ "Conf" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - Ø¯Ø± ØªØ¨ "Site directory"ØŒ Ù…Ø³ÛŒØ± `/www/wwwroot/hurparvaz.com/` Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
   - ÙØ§ÛŒÙ„ `hurparvaz-frontend.zip` Ø±Ø§ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯
   - ÙØ§ÛŒÙ„ Ø±Ø§ extract Ú©Ù†ÛŒØ¯
   - ØªÙ…Ø§Ù… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ `dist/` Ø±Ø§ Ø¨Ù‡ root Ø¯Ø§Ù…Ù†Ù‡ Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯

### Ù…Ø±Ø­Ù„Ù‡ 2: ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø§Ù…Ù†Ù‡

1. **Ø¯Ø± Ù¾Ù†Ù„ Ø§ÛŒ Ù¾Ù†Ù„**:
   - Ø±ÙˆÛŒ Ø¯Ø§Ù…Ù†Ù‡ `hurparvaz.com` Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - Ø±ÙˆÛŒ "Conf" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - Ø¯Ø± ØªØ¨ "Domain Manager":
     - `hurparvaz.com` (Ù¾ÙˆØ±Øª 80)
     - `www.hurparvaz.com` (Ù¾ÙˆØ±Øª 80)
   - Ø¯Ø± ØªØ¨ "Default indexes":
     - `index.html` Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÙØ§ÛŒÙ„ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯

### Ù…Ø±Ø­Ù„Ù‡ 3: Ø¢Ù¾Ù„ÙˆØ¯ Ùˆ ØªÙ†Ø¸ÛŒÙ… Backend

1. **ÙØ§ÛŒÙ„ Ø¢Ù…Ø§Ø¯Ù‡**: `hurparvaz-backend.zip`
2. **Ù…Ø³ÛŒØ± Ø¢Ù¾Ù„ÙˆØ¯**: `/www/wwwroot/api/` ÛŒØ§ `/www/wwwroot/backend/`
3. **Ù…Ø±Ø§Ø­Ù„**:
   - ÙØ§ÛŒÙ„ `hurparvaz-backend.zip` Ø±Ø§ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯
   - ÙØ§ÛŒÙ„ Ø±Ø§ extract Ú©Ù†ÛŒØ¯
   - Ù¾ÙˆØ´Ù‡ `backend/` Ø±Ø§ Ø¨Ù‡ `api/` ÛŒØ§ `backend/` Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯

### Ù…Ø±Ø­Ù„Ù‡ 4: ØªÙ†Ø¸ÛŒÙ… Node.js

1. **Ø¯Ø± Ù¾Ù†Ù„ Ø§ÛŒ Ù¾Ù†Ù„**:
   - Ø¨Ù‡ Ø¨Ø®Ø´ "Node Project" Ø¨Ø±ÙˆÛŒØ¯
   - Ø±ÙˆÛŒ "Add site" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - ØªÙ†Ø¸ÛŒÙ…Ø§Øª:
     - **Domain**: `api.hurparvaz.com` ÛŒØ§ `hurparvaz.com:3000`
     - **Port**: `3000`
     - **Root Path**: `/www/wwwroot/api/`
     - **Node Version**: `18.x` ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ±
     - **Start Command**: `npm start`
     - **Run Directory**: `/www/wwwroot/api/`

### Ù…Ø±Ø­Ù„Ù‡ 5: ØªÙ†Ø¸ÛŒÙ… Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·

Ø¯Ø± Ù¾Ù†Ù„ Ø§ÛŒ Ù¾Ù†Ù„ØŒ Environment Variables Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:

```
NODE_ENV=production
PORT=3000
DATABASE_URL=file:./prod.db
JWT_SECRET=your-super-secure-jwt-secret-key-change-this
JWT_EXPIRES_IN=7d
SEPEHR_API_BASE_URL=https://partners.sepehrsupport.ir
SEPEHR_API_KEY=your-sepehr-api-key
SEPEHR_API_SECRET=your-sepehr-api-secret
CHARTER118_BASE_URL=https://api.charter118.com
CHARTER118_API_KEY=your-charter118-api-key
CORS_ORIGIN=https://hurparvaz.com
HELMET_ENABLED=true
RATE_LIMIT_TTL=60
RATE_LIMIT_LIMIT=100
LOG_LEVEL=info
COMPRESSION_ENABLED=true
MORGAN_FORMAT=combined
```

### Ù…Ø±Ø­Ù„Ù‡ 6: Ù†ØµØ¨ Dependencies Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

1. **Ø¯Ø± Terminal Ø§ÛŒ Ù¾Ù†Ù„**:
   ```bash
   cd /www/wwwroot/api/
   npm install
   npx prisma generate
   npx prisma migrate deploy
   ```

2. **Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Application**:
   - Ø¯Ø± Ù¾Ù†Ù„ Ø§ÛŒ Ù¾Ù†Ù„ØŒ Node.js application Ø±Ø§ start Ú©Ù†ÛŒØ¯
   - ÛŒØ§ Ø§Ø² Ø¯Ø³ØªÙˆØ± `npm start` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯

### Ù…Ø±Ø­Ù„Ù‡ 7: ØªÙ†Ø¸ÛŒÙ…Ø§Øª SSL

1. **Ø¯Ø± Ù¾Ù†Ù„ Ø§ÛŒ Ù¾Ù†Ù„**:
   - Ø±ÙˆÛŒ Ø¯Ø§Ù…Ù†Ù‡ `hurparvaz.com` Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - Ø±ÙˆÛŒ "Conf" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - Ø¯Ø± ØªØ¨ "SSL":
     - "Let's Encrypt" Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
     - Ú¯ÙˆØ§Ù‡ÛŒ SSL Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯
     - "Force HTTPS" Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯

### Ù…Ø±Ø­Ù„Ù‡ 8: ØªÙ†Ø¸ÛŒÙ…Ø§Øª Proxy (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)

Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ API Ø§Ø² Ù‡Ù…Ø§Ù† Ø¯Ø§Ù…Ù†Ù‡ Ø³Ø±Ùˆ Ø´ÙˆØ¯:

1. **Ø¯Ø± Ù¾Ù†Ù„ Ø§ÛŒ Ù¾Ù†Ù„**:
   - Ø±ÙˆÛŒ Ø¯Ø§Ù…Ù†Ù‡ `hurparvaz.com` Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - Ø±ÙˆÛŒ "Conf" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
   - Ø¯Ø± ØªØ¨ "Reverse proxy":
     - **Proxy Name**: `api`
     - **Target URL**: `http://127.0.0.1:3000`
     - **Send Domain**: `hurparvaz.com`
     - **Proxy Directory**: `/api`

### Ù…Ø±Ø­Ù„Ù‡ 9: ØªØ³Øª

1. **Frontend**: `https://hurparvaz.com`
2. **Backend API**: `https://hurparvaz.com:3000/api` ÛŒØ§ `https://hurparvaz.com/api`
3. **Health Check**: `https://hurparvaz.com:3000/health`

## ğŸ”§ Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…ÙÛŒØ¯

### Ø¯Ø± Terminal Ø§ÛŒ Ù¾Ù†Ù„:
```bash
# Ù†ØµØ¨ dependencies
cd /www/wwwroot/api/
npm install

# ØªÙˆÙ„ÛŒØ¯ Prisma client
npx prisma generate

# Ø§Ø¬Ø±Ø§ÛŒ migrations
npx prisma migrate deploy

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ application
npm start

# Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§
tail -f logs/combined.log

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
pm2 status
```

### Ù…Ø¯ÛŒØ±ÛŒØª Application:
```bash
# Ø´Ø±ÙˆØ¹
pm2 start ecosystem.config.js

# ØªÙˆÙ‚Ù
pm2 stop trevel-backend

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯
pm2 restart trevel-backend

# Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§
pm2 logs trevel-backend
```

## âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù…

1. **Ø§Ù…Ù†ÛŒØª**: JWT_SECRET Ø±Ø§ Ø­ØªÙ…Ø§Ù‹ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯
2. **Ø¯Ø§Ù…Ù†Ù‡**: CORS_ORIGIN Ø±Ø§ Ø¨Ø§ Ø¯Ø§Ù…Ù†Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯
3. **Ù¾ÙˆØ±Øª**: Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ù¾ÙˆØ±Øª 3000 Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø§Ø³Øª
4. **SSL**: Ú¯ÙˆØ§Ù‡ÛŒ SSL Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯
5. **Backup**: Ø¨Ù‡ Ø·ÙˆØ± Ù…Ù†Ø¸Ù… backup Ø¨Ú¯ÛŒØ±ÛŒØ¯

## ğŸ†˜ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬:

1. **Application Ø´Ø±ÙˆØ¹ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯**:
   - Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
   - Dependencies Ø±Ø§ Ù†ØµØ¨ Ú©Ù†ÛŒØ¯
   - Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ· Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯

2. **API Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª**:
   - Ù¾ÙˆØ±Øª 3000 Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
   - CORS Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
   - Proxy settings Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯

3. **Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ø¯**:
   - DATABASE_URL Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
   - Prisma migrations Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯

4. **Frontend Ù„ÙˆØ¯ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯**:
   - ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ dist Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
   - .htaccess Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
   - SSL Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

Ø¯Ø± ØµÙˆØ±Øª Ù…Ø´Ú©Ù„:
1. Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
2. ÙˆØ¶Ø¹ÛŒØª Application Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
3. Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ· Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
4. Dependencies Ø±Ø§ Ù†ØµØ¨ Ú©Ù†ÛŒØ¯

---

**Ø®Ù„Ø§ØµÙ‡**: ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª! ÙÙ‚Ø· Ú©Ø§ÙÛŒÙ‡ Ù…Ø±Ø§Ø­Ù„ Ø¨Ø§Ù„Ø§ Ø±Ø§ Ø¯Ù†Ø¨Ø§Ù„ Ú©Ù†ÛŒØ¯.

